# さじグラム — 要件定義書

## 概要

レシピの大さじ・小さじ表記をグラムに変換する単機能Webアプリ。プルダウン操作で分量と調味料を選ぶだけで、リアルタイムにグラム数を表示する。

## ターゲット

- 対象ユーザー: 家庭で料理をする人（はかりで計量したい派）
- 利用端末: スマートフォン（片手操作）、タブレット、PC
- 利用シーン: レシピを見ながらキッチンで片手操作

## 技術スタック

- **構成**: HTML + CSS + JavaScript（単一ファイル、フレームワーク不使用）
- **外部依存**: なし（CDN含め外部ライブラリ不使用）
- **配布形態**: 静的HTML（GitHub Pages等で配信可能）
- **ビルドツール**: Claude Code でローカル開発 → git push でデプロイ

---

## 機能要件

### F1: さじ種別の選択

- 「大さじ」「小さじ」をラジオボタンまたはトグルで切り替える
- 小さじは大さじの 1/3（5ml）として計算
- デフォルトは「大さじ」

### F2: 分量の入力（プルダウン3連）

- **整数部**: プルダウンで 0〜9 を選択
- **端数・分子**: プルダウンで 0〜5 を選択
- **端数・分母**: プルダウンで 1〜5 を選択（0除算防止のため1始まり）
- 表示レイアウト: `[▼ 1] と [▼ 2] / [▼ 3]`
- デフォルト: 整数=1、分子=0、分母=1

#### バリデーション

- 分子 ≧ 分母の場合: 警告表示せず結果は計算する（2/2 = 1として扱う）
- 整数0 かつ 分子0 の場合（実質0さじ）: 結果を「0g」と表示
- 分子0の場合: 端数なしとして整数部のみで計算

### F3: 調味料の選択

- プルダウンで調味料を選択
- 選択肢はグループラベル付きで視認性を確保（`<optgroup>`使用）

#### 調味料マスタ（大さじ1 = 15mlあたりのグラム数）

| グループ | 大さじ1 | 小さじ1 | 調味料 |
|---|---|---|---|
| 15g（比重≒1.0） | 15g | 5g | 水、酒、酢 |
| 18g（比重≒1.2） | 18g | 6g | みりん、しょうゆ、塩 |
| 9g（比重≒0.6） | 9g | 3g | 小麦粉、片栗粉 |

- データはJSオブジェクトとして定義し、調味料の追加を容易にする
- デフォルト選択: 先頭の調味料（水）

### F4: リアルタイム計算・結果表示

- すべての入力変更に連動し、ボタン押下なしで即時計算・表示
- `input` / `change` イベントで発火

#### 計算式

```
グラム = (整数 + 分子/分母) × さじ係数 × 大さじ1あたりのグラム数
```

- さじ係数: 大さじ = 1、小さじ = 1/3
- 端数は分数のまま計算し、最終結果を小数第2位で四捨五入
- 割り切れる場合は整数表示（例: 18.0 → 18）

#### 表示形式

- 入力内容を自然な日本語で要約 + グラム数
- 例: 「しょうゆ 大さじ1と2/3 ＝ 30g」
- 端数0の場合: 「酢 大さじ2 ＝ 30g」（端数部分を省略）

---

## 非機能要件

### NF1: レスポンシブデザイン

- 最小幅320px（iPhone SE）〜タブレット横画面まで対応
- プルダウン・ボタンはタッチしやすいサイズ（最低44x44px）
- キッチンでの片手操作を想定し、主要UIは画面上半分に収める

### NF2: パフォーマンス

- 初期ロードは軽量（単一HTMLファイル、数十KB以内）
- JavaScriptの計算はイベント発火ごとに即時完了（体感遅延なし）

### NF3: アクセシビリティ

- `<label>` 要素の適切な紐付け
- キーボード操作（Tab移動・Enter選択）で全機能利用可能
- 高コントラストな配色（結果表示は特に大きく目立たせる）

### NF4: ブラウザ対応

- iOS Safari 15+
- Android Chrome 最新
- デスクトップ Chrome / Firefox / Safari 最新

---

## 画面構成（単一画面）

```
┌──────────────────────────────┐
│                              │
│   さじグラム                  │  ← タイトル
│                              │
│   ○ 大さじ  ○ 小さじ         │  ← さじ種別
│                              │
│   [▼ 1] と [▼ 2] / [▼ 3]   │  ← 分量（プルダウン×3）
│                              │
│   [▼ しょうゆ            ]   │  ← 調味料選択
│                              │
├──────────────────────────────┤
│                              │
│   しょうゆ 大さじ1と2/3       │
│          ＝ 30g              │  ← 結果表示
│                              │
└──────────────────────────────┘
```

---

## ファイル構成（Claude Code用）

```
spoon-gram/
├── index.html          # 単一ファイル（HTML + CSS + JS インライン）
└── README.md           # 使い方・調味料マスタの説明
```

---

## 実装上の注意点

### 調味料マスタの設計

```javascript
// グループ定義とグラム値
const groups = [
  { label: "15g（水・酒・酢）", gramPerTablespoon: 15 },
  { label: "18g（みりん・しょうゆ・塩）", gramPerTablespoon: 18 },
  { label: "9g（小麦粉・片栗粉）", gramPerTablespoon: 9 },
];

// 調味料 → グループの対応
const ingredients = [
  { name: "水", group: 0 },
  { name: "酒", group: 0 },
  // ...
];
```

- 調味料追加時はこの配列に1行追加するだけで済む構造にする

### 端数計算の精度

- JavaScriptの浮動小数点誤差に注意
- 分子/分母の除算結果をそのまま使い、最終結果のみ丸める
- 表示時に `parseFloat(result.toFixed(2))` で不要な末尾ゼロを除去

### プルダウンの連動

- 分子が0のとき、分母プルダウンをdisabledにする（視覚的に端数なしを示す）
- 分子変更時に分母の状態を更新

---

## 将来の拡張候補（スコープ外）

- 調味料の追加（砂糖、バター、マヨネーズ、油、はちみつ等）
- グラム → さじへの逆変換
- 複数調味料の同時変換・合計表示
- PWA化してオフライン対応
- カスタム調味料の登録機能
